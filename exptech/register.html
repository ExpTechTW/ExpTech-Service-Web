<html lang="zh-Hant">

<head>
  <title>ExpTech | 註冊</title>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="註冊 ExpTech 帳號">
  
  <!-- Facebook Meta Tags -->
  <meta property="og:site_name" content="探索科技 | ExpTech Studio" />
  <meta property="og:url" content="https://exptech.com.tw/api/v1/file/exptech/register.html">
  <meta property="og:type" content="website">
  <meta property="og:title" content="註冊">
  <meta property="og:description" content="註冊 ExpTech 帳號">
  <meta property="og:image" content="https://raw.githubusercontent.com/ExpTechTW/ExpTechTW.github.io/master/image/main/ExpTech.jpg">

  <!-- Twitter Meta Tags -->
  <meta name="twitter:card" content="summary_large_image">
  <meta property="twitter:domain" content="exptech.com.tw">
  <meta property="twitter:url" content="https://exptech.com.tw/api/v1/file/exptech/register.html">
  <meta name="twitter:title" content="註冊">
  <meta name="twitter:description" content="註冊 ExpTech 帳號">
  <meta name="twitter:image" content="https://raw.githubusercontent.com/ExpTechTW/ExpTechTW.github.io/master/image/main/ExpTech.jpg">

</head>

<body>
  <main>
    <div class="container">
      <div class="title">註冊</div>
      <div class="description">註冊 ExpTech 帳號</div>
      <form id="register" class="register-form" action="" method="post">
        <div class="form-item-container">
          <div class="form-item">
            <label class="required" for="username">用戶名稱</label>
            <input id="username" type="text" name="username" placeholder="用戶名稱" required>
          </div>
          <div class="form-item">
            <label class="required" for="email">電子郵件地址</label>
            <div class="">
              <input id="email" type="email" name="email" placeholder="電子郵件地址" required>
              <button id="request-otp">請求驗證碼</button>
            </div>
          </div>
          <div class="form-item">
            <label class="required" for="password">用戶密碼</label>
            <input id="password" type="password" name="password" placeholder="用戶密碼" required>
          </div>
          <div class="form-item">
            <label class="required" for="otp">驗證碼</label>
            <input id="otp" type="text" name="otp" placeholder="驗證碼" required>
          </div>
        </div>
        <button id="login" type="button">登入</button>
        <button id="submit" type="submit">註冊</button>
      </form>
    </div>
    <a class="info" href="https://exptech.com.tw/f?v=discord">Discord 伺服器</a>
  </main>

  <style>
    @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+TC&display=swap');

    body {
      display: grid;
      align-items: center;
      justify-content: center;
      padding: 0;
      margin: 0;
      height: 100svh;
      background-color: #fffbff;
      user-select: none;
      font-family: "Noto Sans TC", sans-serif;
      overflow-x: hidden;
    }

    .container {
      width: 400px;
      padding: 48px 36px;
      padding-left: 28px;
      outline: 1px solid #e4e1ec;
      box-shadow: 0 0 8px 0 rgba(0, 0, 0, 0.1);
      border-radius: 8px;
    }

    .title {
      font-size: 24px;
      font-weight: bold;
      text-align: center;
      margin-bottom: 8px;
    }

    .description {
      text-align: center;
      margin: 16px;
    }

    .register-form {
      display: table;
      margin: 0;
      width: 100%;
    }

    .form-item-container {
      margin-left: 8px;
      margin-bottom: 48px;
    }

    .form-item {
      display: flex;
      flex-direction: column;
      margin-bottom: 12px;
    }
    
    .form-item {
      margin-bottom: 12px;
    }

    label {
      font-weight: bold;
      font-size: 14px;
      padding: 8px 0;
      color: #5e5d67;
    }

    input[type=text], input[type=password], input[type=email] {
      all: unset;
      padding: 12px;
      font-size: 14px;
      border-radius: 4px;
      outline: 1px solid #e4e1ec;
      transition: outline .1s ease;
    }

    input[type=text]:hover, input[type=password]:hover, input[type=email]:hover {
      outline-color: #777680;
    }

    input[type=text]:active, input[type=password]:active, input[type=email]:active {
      opacity: 0.8;
    }

    input[type=text]:focus, input[type=password]:focus, input[type=email]:focus {
      outline: 2px solid #5156a9;
    }

    #login {
      all: unset;
      padding: 8px 8px;
      background-color: transparent;
      color: #5156a9;
      border-radius: 4px;
      font-size: 16px;
      font-weight: bold;
      transition: background-color .1s ease;
    }
    
    #login:hover {
      background-color: #5156a91f;
    }

    #submit {
      all: unset;
      padding: 8px 24px;
      background-color: #5156a9;
      color: #fff;
      border-radius: 4px;
      font-size: 16px;
      font-weight: bold;
      float: right;
    }

    .forget-password {
      align-self: start;
      font-size: 14px;
      font-weight: bold;
      padding: 12px 0;
      color: #5156a9;
      text-decoration: none;
    }
    
    .info {
      display: inline-block;
      margin: 16px;
      font-size: 14px;
      color: #ADAAAF;
      text-decoration: none;
    }

    @media (prefers-color-scheme: dark) {
      body { background-color: #1b1b1f; color: #e5e1e6 }
      .container { background-color: rgba(191, 194, 255, .08); }
      .container, input[type=text], input[type=password], input[type=email] { outline-color: #46464f; }
      label { color: #acaab4; }
      input[type=text]:hover, input[type=password]:hover, input[type=email]:hover { outline-color: #777680; }
      input[type=text]:focus, input[type=password]:focus, input[type=email]:focus { outline-color: #bfc2ff; }
      #submit { background-color: #bfc2ff; color: #000 }
      #login, .forget-email { color: #bfc2ff; }
    }

    @media screen and (max-width: 768px) {
      .container { width: auto; }
    }
  </style>

  <script>
    document.getElementById("login").addEventListener("click", (e) => {
      window.location.href = './login.html';
    })

    document.getElementById("register").addEventListener("submit", (e) => {
      e.preventDefault();
      const values = {
        username: document.getElementById("username").value,
        password: document.getElementById("password").value
      }

      document.getElementById("username").disabled = true;
      document.getElementById("password").disabled = true;
      document.getElementById("submit").disabled = true;

      fetch("https://exptech.com.tw/api/v1/et/sign-in", {
        method: "POST",
        headers: {
          "Content-Type": "application/json",
        },
        body: JSON.stringify({
          name: values.username,
          pass: values.password,
        })
      })
        .then(async res => {
          const data = await res.json()
          console.log(data)
          localStorage.setItem("key", data.key);
          localStorage.setItem("timestamp", data.time);
          window.location.href = './user.html';
        })
        .catch(err => {
          console.error(err);
          document.getElementById("username").disabled = false;
          document.getElementById("password").disabled = false;
          document.getElementById("submit").disabled = false;
        });
    })
  </script>
</body>

</html>